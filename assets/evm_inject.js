(()=>{var{defineProperty:I,getOwnPropertyNames:T,getOwnPropertyDescriptor:x}=Object,A=Object.prototype.hasOwnProperty;var z=new WeakMap,m=(e)=>{var n=z.get(e),t;if(n)return n;if(n=I({},"__esModule",{value:!0}),e&&typeof e==="object"||typeof e==="function")T(e).map((r)=>!A.call(n,r)&&I(n,r,{get:()=>e[r],enumerable:!(t=x(e,r))||t.enumerable}));return z.set(e,n),n};var L=(e,n)=>{for(var t in n)I(e,t,{get:n[t],enumerable:!0,configurable:!0,set:(r)=>n[t]=()=>r})};var S={};L(S,{ZilPayProviderImpl:()=>N});function j(){let e=globalThis.document.querySelector("link[rel*='icon']");if(!e)return"";return e.href}function D(){if(typeof document>"u")return{description:null,title:null,colors:null};let e=document.getElementsByTagName("meta"),n=null,t=null;for(let o=0;o<e.length;o++){let i=e[o],a=i.getAttribute("name"),l=i.getAttribute("content");if(!a||!l)continue;switch(a.toLowerCase()){case"description":n=l;break;case"title":t=l;break}}let r=window.getComputedStyle(document.body),s=document.querySelector("button"),d=s?window.getComputedStyle(s):null,c=s?window.getComputedStyle(s,":hover"):null,M={background:g(r.backgroundColor),text:g(r.color),primary:d?g(d.backgroundColor):void 0,secondary:c&&c.backgroundColor!==d?.backgroundColor?g(c.backgroundColor):d?g(d.backgroundColor):void 0};return{description:n,title:t,colors:M}}function g(e){let n=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);if(!n)return e;let t=parseInt(n[1]).toString(16).padStart(2,"0"),r=parseInt(n[2]).toString(16).padStart(2,"0"),s=parseInt(n[3]).toString(16).padStart(2,"0");return`#${t}${r}${s}`}var u="@/BearBy/injected-script",f="@/BearBy/content-script",y={REQUEST:"BEARBY_REQUEST",RESPONSE:"BEARBY_RESPONSE",EVENT:"BEARBY_EVENT"};class N{isZilPay=!0;isBearby=!0;isMetaMask=!0;supportedMethods=new Set(["eth_requestAccounts","eth_accounts","eth_coinbase","eth_sendTransaction","eth_getBalance","eth_getTransactionByHash","eth_getTransactionReceipt","eth_call","eth_estimateGas","eth_blockNumber","eth_getBlockByNumber","eth_getBlockByHash","eth_subscribe","eth_unsubscribe","net_version","eth_chainId","eth_getCode","eth_getStorageAt","eth_gasPrice","eth_signTypedData","eth_signTypedData_v4","eth_getTransactionCount","personal_sign","eth_sign","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_watchAsset","wallet_getPermissions","wallet_requestPermissions","wallet_scanQRCode","eth_getEncryptionPublicKey","eth_decrypt"]);#e=new Map;#n=typeof window<"u"&&typeof window.flutter_inappwebview<"u";constructor(){if(this.#t(),this.#r(),!this.#n)this.#o()}#t(){this.#e.set("connect",new Set),this.#e.set("disconnect",new Set),this.#e.set("chainChanged",new Set),this.#e.set("accountsChanged",new Set),this.#e.set("message",new Set)}#r(){if(typeof window<"u"&&window)window.handleZilPayEvent=(e)=>{let n=this.#e.get(e.event);if(n)switch(e.event){case"connect":n.forEach((r)=>r(e.data));break;case"disconnect":n.forEach((r)=>r(e.data));break;case"chainChanged":let t=e.data;if(typeof t!=="string"||!t.startsWith("0x")){console.warn("Invalid chainId format for chainChanged event");return}n.forEach((r)=>r(t));break;case"accountsChanged":n.forEach((r)=>r(e.data));break;case"message":n.forEach((r)=>r(e.data));break}}}#o(){if(typeof document>"u")return;document.addEventListener(u,(e)=>{let n=e.detail;if(!n)return;try{let t=typeof n==="string"?JSON.parse(n):n;if(t.type===y.EVENT&&window.handleZilPayEvent)window.handleZilPayEvent(t.payload)}catch(t){console.error("Error parsing BearBy event:",t)}})}async request(e){if(!this.supportedMethods.has(e.method))return Promise.reject({message:"Unsupported method",code:4200,data:{method:e.method}});if(this.#n)return this.#i(e);return this.#a(e)}#i(e){let n=j();return new Promise((t,r)=>{let s=Math.random().toString(36).substring(2),d=D(),c={type:y.REQUEST,uuid:s,payload:e,icon:n,...d};if(typeof window>"u"||!window||!window.flutter_inappwebview){r({message:"BearBy channel is not available",code:4900,data:null});return}let M=(o)=>{let i=o.data;if(!i||typeof i!=="object")return;if(i.type===y.RESPONSE&&i.uuid===s){if(i.payload.error)r({message:i.payload.error.message,code:i.payload.error.code||4000,data:i.payload.error.data});else t(i.payload.result);window.removeEventListener("message",M)}};window.addEventListener("message",M);try{window.flutter_inappwebview.callHandler("EIP1193Channel",JSON.stringify(c)).catch((o)=>{window.removeEventListener("message",M),r({message:`Failed to send request: ${o.message||"Unknown error"}`,code:4000,data:o})})}catch(o){window.removeEventListener("message",M),r({message:`Failed to send request: ${o.message}`,code:4000,data:o})}})}#a(e){if(typeof document>"u")return Promise.reject({message:"BearBy extension is not available",code:4900,data:null});let n=j(),t=Math.random().toString(36).substring(2),r=D(),s={type:y.REQUEST,uuid:t,payload:e,icon:n,from:u,...r};return new Promise((d,c)=>{let M=(o)=>{let i=o.detail;if(!i)return;try{let a=typeof i==="string"?JSON.parse(i):i;if(a.type===y.RESPONSE&&a.uuid===t)if(document.removeEventListener(u,M),a.payload?.error)c({message:a.payload.error.message,code:a.payload.error.code||4000,data:a.payload.error.data});else d(a.payload?.result)}catch(a){console.error("Error parsing response:",a)}};document.addEventListener(u,M);try{let o=new CustomEvent(f,{detail:JSON.stringify(s)});document.dispatchEvent(o)}catch(o){document.removeEventListener(u,M),c({message:`Failed to send request: ${o.message}`,code:4000,data:o})}})}async enable(){return this.request({method:"eth_requestAccounts"})}on(e,n){let t=this.#e.get(e);if(t)t.add(n)}removeListener(e,n){let t=this.#e.get(e);if(t)t.delete(n)}}function w(){if(typeof window<"u"&&window.crypto&&typeof window.crypto.randomUUID==="function")return window.crypto.randomUUID();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)})}var v=null;function P(){if(!v)v={uuid:w(),name:"ZilPay Wallet",icon:h(),rdns:"io.zilpay"};return v}function h(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0yMzUuMzU4IDUxMS41NDNDMTUyLjIxIDUwMy4xMzQgNzYuNDczOCA0NTkuMTUyIDM1Ljg2NjQgMzk1LjQ0MkMxOS40MzAxIDM2OS41NyA2LjUzODg4IDMzNi41ODMgMi4zNDkyNCAzMDkuNzRDMC40NzIxNDMgMjkxLjA0NiAtMC4yODEyMDggMjcyLjI1NCAwLjA5MzI3NTYgMjUzLjQ2OUMyLjAyNjk2IDE5NS4yNTYgMTUuNTYyNyAxNTAuMzA0IDQyLjk1NjYgMTEwLjIwMkM1MS40MTggOTcuNjEwNyA2MS4zNzQzIDg2LjA5OTUgNzIuNjA2NCA3NS45MjE1Qzk0LjA3NDUgNTQuODk5MSAxMTkuMDU0IDM3LjgyMjkgMTQ2LjQwOSAyNS40NzA4QzE3MS4zNSAxMy40NzkgMTk3Ljk4MSA1LjQwNzQzIDIyNS4zNjcgMS41MzkxNUMyNDYuNjk3IC0wLjYxNTk5OCAyNjguMTk0IC0wLjUwNzYgMjg5LjUwMSAxLjg2MjU1QzMzOC40ODggOS4zMDA3NiAzODEuNjc0IDMwLjMyMTggNDIzLjI0OCA2Ni44NjYyQzQ2NC44MjIgMTAzLjQxMSA0OTYuNDA1IDE1MS45MjEgNTA3LjA0MSAxOTguNDlDNTExLjIzIDIxNS45NTQgNTExLjg3NSAyMjIuNzQ2IDUxMS44NzUgMjQ0LjQxM0M1MTIuNDY4IDI2MC4yODMgNTEwLjk1IDI3Ni4xNjIgNTA3LjM2MyAyOTEuNjNMNTA0Ljc4NSAzMDMuOTE5TDQ5NS43NjEgMzA1Ljg2QzQ2OS4yMTEgMzExLjA3NyA0NDMuMDQ1IDMxOC4xMDEgNDE3LjQ0NyAzMjYuODgxQzQwMS45NzcgMzMyLjcwMiAzOTguNzU0IDMzMy45OTUgMzc1Ljg3MiAzNDQuMDIxQzM1Mi45OTEgMzU0LjA0NiAzNDMuOTY3IDM1Ny42MDQgMzMyLjA0MiAzNjAuODM4QzMwNy4yMjcgMzY3LjYyOSAyODAuOCAzNjguMjc2IDI2My4wNzQgMzYyLjQ1NUMyMzguOTAzIDM1NC4zNyAyMjAuODU1IDMzNC45NjYgMjE2Ljk4OCAzMTMuMjk4QzIxNS43NTMgMzAzLjQ3MSAyMTYuMjk5IDI5My41IDIxOC42IDI4My44NjhDMjIzLjc1NiAyNjUuNDM0IDIzNS4wMzYgMjQ2LjM1NCAyNTIuNzYxIDIyNi42MjZMMjU4Ljg4NSAyMjAuMTU4QzI1OC44ODUgMjIwLjE1OCAyNjAuMTc0IDIyOC4yNDMgMjYxLjE0MSAyMzcuNjIyQzI2Mi4xMDcgMjQ3LjAwMSAyNjMuMzk3IDI1NS4wODYgMjYzLjM5NyAyNTUuNDA5TDI3MC40ODcgMjUzLjE0NUMyOTEuNzcxIDI0NS40NTIgMzE0Ljc5NyAyNDMuOTk0IDMzNi44NzcgMjQ4Ljk0MUMzNTQuMjg5IDI1My4yMDMgMzcxLjQwOSAyNTguNjA0IDM4OC4xMTkgMjY1LjExMUMzOTUuODU0IDI2OC4wMjIgNDA0LjIzMyAyNzAuOTMyIDQwNy4xMzQgMjcxLjU3OUM0MjQuMDYzIDI3My44NDQgNDQxLjI4NiAyNzEuNjEzIDQ1Ny4wODcgMjY1LjExMUM0NjAuOTU1IDI2My40OTQgNDYxLjI3NyAyNjMuMTcxIDQ2Mi4yNDQgMjU5LjI5QzQ2My41MzYgMjUwLjI4MSA0NjMuNTM2IDI0MS4xMzMgNDYyLjI0NCAyMzIuMTI0TDQ2MS4yNzcgMjI3LjI3M0w0NDUuNDg1IDIxNi42MDFDMzUxLjM3OSAxNTMuODYxIDI3Mi4wOTggMTE2LjM0NyAyMDUuMDY0IDEwMy40MTFDMTg2LjY5NCA5OS41Mjk3IDE1NC43ODggOTYuNjE5MSAxNTQuNzg4IDk4LjU1OTVDMTU0Ljc4OCAxMDAuNSAxNTQuNzg4IDk5Ljg1MzEgMTU0LjQ2NiAxMDAuMTc3QzE1NC4xNDMgMTAwLjUgMTYzLjQ5IDEwNS42NzQgMTg3Ljk4MyAxMTcuNjRMMjIxLjgyMiAxMzQuMTM0QzIxNy4wOTQgMTM2LjE0NCAyMTIuMjUyIDEzNy44NzIgMjA3LjMyIDEzOS4zMDhDMTg5LjAwMSAxNDUuMTMgMTcxLjEyMiAxNTIuMjY0IDE1My44MjEgMTYwLjY1M0MxNDAuOTMgMTY3LjEyMSAxMjIuMjM4IDE3Ny43OTMgMTIyLjIzOCAxNzkuMDg2TDEzNy43MDcgMTgxLjAyN0wxNTMuMTc3IDE4Mi4zMkwxNDQuNzk3IDE5MS4zNzZDMTMzLjE5NSAyMDMuMzQxIDEyNi43NSAyMTEuMTAzIDExMC4zMTMgMjMxLjE1NEw5Ni43Nzc0IDI0OC4yOTRIMTA4LjcwMkMxMTIuNjk2IDI0OC4yOTYgMTE2LjY4NCAyNDguNjIgMTIwLjYyNiAyNDkuMjY0QzEyMC42MjYgMjQ5LjU4OCAxMTUuMTQ3IDI2OC4wMjIgMTA4LjM4IDI5MC4zMzZDMTAxLjYxMiAzMTIuNjUxIDk2LjEzMjkgMzMxLjA4NSA5Ni40NTUyIDMzMS4wODVMMTA5LjAyNCAzMjguNDk4QzExNy40MDMgMzI2LjU1NyAxMjEuOTE1IDMyNS45MSAxMjIuMjM4IDMyNi41NTdDMTIyLjU2IDMyNy4yMDQgMTIzLjg0OSAzNDQuOTkxIDEyNS40NiAzNjYuNjU5QzEyNy4wNzIgMzg4LjMyNyAxMjguMDM5IDQwNi4xMTQgMTI4LjM2MSA0MDYuMTE0QzEzMi4yMjcgNDAzLjQ4NSAxMzUuODkgNDAwLjU2NCAxMzkuMzE4IDM5Ny4zODJMMTUwLjkyMSAzODguNjVDMTUxLjI0MyAzODguNjUgMTYwLjkxMSA0MDMuMjAzIDE3Mi44MzYgNDIwLjk5QzE4NC43NiA0MzguNzc3IDE5NC40MjggNDUzLjMzIDE5NC43NTEgNDUzLjMzQzE5OC41MTIgNDQ5Ljk4NiAyMDEuOTY0IDQ0Ni4zMDYgMjA1LjA2NCA0NDIuMzM1QzIxMi43OTggNDMzLjI4IDIxNS4wNTQgNDMxLjAxNiAyMTUuNjk5IDQzMS45ODZMMjI0LjcyMyA0NDIuNjU4QzIyOC45MTMgNDQ3LjgzMyAyMzYuNjQ3IDQ1Ni4yNDEgMjQxLjgwNCA0NjEuNDE1TDI1MC44MjggNDcwLjQ3MUgyNzAuMTY0QzMwMC43ODEgNDcwLjQ3MSAzMTkuNzk2IDQ3My4zODEgMzQ1LjI1NiA0ODIuNzZMMzUyLjk5MSA0ODUuMzQ3TDM1MC40MTIgNDg3LjI4OEMzMzUuMjY1IDQ5OC42MDcgMzE1LjYwNiA1MDYuMDQ1IDI5MS4xMTMgNTA5LjkyNkMyODEuMjgzIDUxMS4yMjYgMjcxLjM3OCA1MTEuODc2IDI2MS40NjMgNTExLjg2NkMyNTAuODI4IDUxMi4xODkgMjM4LjkwMyA1MTEuODY2IDIzNS4zNTggNTExLjU0M1oiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl85N18xNzcpIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfOTdfMTc3IiB4MT0iMTAxLjUzMyIgeTE9IjU1LjU0MDYiIHgyPSIzMjEuODQiIHkyPSI0OTQuNjI5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIG9mZnNldD0iMC4wMDUiIHN0b3AtY29sb3I9IiMyOUNDQzQiLz4KPHN0b3Agb2Zmc2V0PSIwLjU5NSIgc3RvcC1jb2xvcj0iI0RGMDFCOCIvPgo8c3RvcCBvZmZzZXQ9IjAuODExNDU5IiBzdG9wLWNvbG9yPSIjRUYzQzhFIi8+CjxzdG9wIG9mZnNldD0iMSIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+Cjwvc3ZnPgo="}function E(e){if(typeof window>"u")return;let t={info:P(),provider:e},r=new CustomEvent("eip6963:announceProvider",{detail:Object.freeze(t)});window.dispatchEvent(r)}function p(e){if(typeof window>"u")return;window.addEventListener("eip6963:requestProvider",()=>{E(e)})}(function(){if(typeof window>"u"||!window){console.warn("No window object available for ZilPay injection");return}if(window.__zilpayInjected)return;try{let e=new N;if(!("ethereum"in window)||!window.ethereum)try{Object.defineProperty(window,"ethereum",{value:e,writable:!1,configurable:!0})}catch(n){window.ethereum=e,console.warn("Using fallback assignment for ethereum due to:",n)}E(e),p(e),window.__zilpay_response_handlers=window.__zilpay_response_handlers||{},window.__zilpayInjected=!0,window.dispatchEvent(new Event("ethereum#initialized"))}catch(e){console.error("Failed to inject Ethereum provider:",e)}})();})();
