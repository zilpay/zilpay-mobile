(()=>{var{defineProperty:I,getOwnPropertyNames:z,getOwnPropertyDescriptor:f}=Object,h=Object.prototype.hasOwnProperty;var D=new WeakMap,b=(e)=>{var r=D.get(e),n;if(r)return r;if(r=I({},"__esModule",{value:!0}),e&&typeof e==="object"||typeof e==="function")z(e).map((t)=>!h.call(r,t)&&I(r,t,{get:()=>e[t],enumerable:!(n=f(e,t))||n.enumerable}));return D.set(e,r),r};var x=(e,r)=>{for(var n in r)I(e,n,{get:r[n],enumerable:!0,configurable:!0,set:(t)=>r[n]=()=>t})};var L={};x(L,{BearbyProviderImpl:()=>y});function N(){let e=globalThis.document.querySelector("link[rel*='icon']");if(!e)return"";return e.href}function E(){if(typeof document>"u")return{description:null,title:null,colors:null};let e=document.getElementsByTagName("meta"),r=null,n=null;for(let o=0;o<e.length;o++){let i=e[o],a=i.getAttribute("name"),v=i.getAttribute("content");if(!a||!v)continue;switch(a.toLowerCase()){case"description":r=v;break;case"title":n=v;break}}let t=window.getComputedStyle(document.body),s=document.querySelector("button"),c=s?window.getComputedStyle(s):null,M=s?window.getComputedStyle(s,":hover"):null,d={background:u(t.backgroundColor),text:u(t.color),primary:c?u(c.backgroundColor):void 0,secondary:M&&M.backgroundColor!==c?.backgroundColor?u(M.backgroundColor):c?u(c.backgroundColor):void 0};return{description:r,title:n,colors:d}}function u(e){let r=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);if(!r)return e;let n=parseInt(r[1]).toString(16).padStart(2,"0"),t=parseInt(r[2]).toString(16).padStart(2,"0"),s=parseInt(r[3]).toString(16).padStart(2,"0");return`#${n}${t}${s}`}var g="@/BearBy/injected-script",P="@/BearBy/content-script",l={REQUEST:"BEARBY_REQUEST",RESPONSE:"BEARBY_RESPONSE",EVENT:"BEARBY_EVENT"};class y{isZilPay=!0;isBearby=!0;isMetaMask=!0;supportedMethods=new Set(["eth_requestAccounts","eth_accounts","eth_coinbase","eth_sendTransaction","eth_getBalance","eth_getTransactionByHash","eth_getTransactionReceipt","eth_call","eth_estimateGas","eth_blockNumber","eth_getBlockByNumber","eth_getBlockByHash","eth_subscribe","eth_unsubscribe","net_version","eth_chainId","eth_getCode","eth_getStorageAt","eth_gasPrice","eth_signTypedData","eth_signTypedData_v4","eth_getTransactionCount","personal_sign","eth_sign","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_watchAsset","wallet_getPermissions","wallet_requestPermissions","wallet_scanQRCode","eth_getEncryptionPublicKey","eth_decrypt"]);#e=new Map;#r=typeof window<"u"&&typeof window.flutter_inappwebview<"u";constructor(){if(this.#n(),this.#t(),!this.#r)this.#o()}#n(){this.#e.set("connect",new Set),this.#e.set("disconnect",new Set),this.#e.set("chainChanged",new Set),this.#e.set("accountsChanged",new Set),this.#e.set("message",new Set)}#t(){if(typeof window<"u"&&window)window.handleBearbyEvent=(e)=>{let r=this.#e.get(e.event);if(r)switch(e.event){case"connect":r.forEach((t)=>t(e.data));break;case"disconnect":r.forEach((t)=>t(e.data));break;case"chainChanged":let n=e.data;if(typeof n!=="string"||!n.startsWith("0x")){console.warn("Invalid chainId format for chainChanged event");return}r.forEach((t)=>t(n));break;case"accountsChanged":r.forEach((t)=>t(e.data));break;case"message":r.forEach((t)=>t(e.data));break}}}#o(){if(typeof document>"u")return;document.addEventListener(g,(e)=>{let r=e.detail;if(!r)return;try{let n=typeof r==="string"?JSON.parse(r):r;if(n.type===l.EVENT&&window.handleBearbyEvent)window.handleBearbyEvent(n.payload)}catch(n){console.error("Error parsing BearBy event:",n)}})}async request(e){if(!this.supportedMethods.has(e.method))return Promise.reject({message:"Unsupported method",code:4200,data:{method:e.method}});if(this.#r)return this.#i(e);return this.#a(e)}#i(e){let r=N();return new Promise((n,t)=>{let s=Math.random().toString(36).substring(2),c=E(),M={type:l.REQUEST,uuid:s,payload:e,icon:r,...c};if(typeof window>"u"||!window||!window.flutter_inappwebview){t({message:"BearBy channel is not available",code:4900,data:null});return}let d=(o)=>{let i=o.data;if(!i||typeof i!=="object")return;if(i.type===l.RESPONSE&&i.uuid===s){if(i.payload.error)t({message:i.payload.error.message,code:i.payload.error.code||4000,data:i.payload.error.data});else n(i.payload.result);window.removeEventListener("message",d)}};window.addEventListener("message",d);try{window.flutter_inappwebview.callHandler("EIP1193Channel",JSON.stringify(M)).catch((o)=>{window.removeEventListener("message",d),t({message:`Failed to send request: ${o.message||"Unknown error"}`,code:4000,data:o})})}catch(o){window.removeEventListener("message",d),t({message:`Failed to send request: ${o.message}`,code:4000,data:o})}})}#a(e){if(typeof document>"u")return Promise.reject({message:"BearBy extension is not available",code:4900,data:null});let r=N(),n=Math.random().toString(36).substring(2),t=E(),s={type:l.REQUEST,uuid:n,payload:e,icon:r,from:g,...t};return new Promise((c,M)=>{let d=(o)=>{let i=o.detail;if(!i)return;try{let a=typeof i==="string"?JSON.parse(i):i;if(a.type===l.RESPONSE&&a.uuid===n)if(document.removeEventListener(g,d),a.payload?.error)M({message:a.payload.error.message,code:a.payload.error.code||4000,data:a.payload.error.data});else c(a.payload?.result)}catch(a){console.error("Error parsing response:",a)}};document.addEventListener(g,d);try{let o=new CustomEvent(P,{detail:JSON.stringify(s)});document.dispatchEvent(o)}catch(o){document.removeEventListener(g,d),M({message:`Failed to send request: ${o.message}`,code:4000,data:o})}})}async enable(){return this.request({method:"eth_requestAccounts"})}on(e,r){let n=this.#e.get(e);if(n)n.add(r)}removeListener(e,r){let n=this.#e.get(e);if(n)n.delete(r)}}function m(){if(typeof window<"u"&&window.crypto&&typeof window.crypto.randomUUID==="function")return window.crypto.randomUUID();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)})}var p=null;function A(){if(!p)p={uuid:m(),name:"Bearby Wallet",icon:T(),rdns:"io.bearby"};return p}function T(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjM5LjEyNSAyMTUuMzY3QzI1OC4wMTQgMjA0LjM5MiAyNjEuNDc4IDE3NC44NDQgMjQ2Ljg2MSAxNDkuMzY4QzIzMi4yNDUgMTIzLjg5MiAxNDguOTkgNDUuMjAwNSAxNDMuMzY3IDQ4LjQ2NjlDMTM3Ljc0NCA1MS43MzMzIDE2My44NCAxNjMuNjMzIDE3OC40NTcgMTg5LjEwOUMxOTMuMDc0IDIxNC41ODUgMjIwLjIzNSAyMjYuMzQxIDIzOS4xMjUgMjE1LjM2N1pNMzQ1LjQ4NSAzOTcuNDc5QzM2MC42MDEgMzg4LjY5OCAzNzguNzQ3IDM4NS4yNzcgMzk2LjE3IDM4NC4yMTZDNDA3LjE5NiAzODMuNTQ1IDQxOC4yNCAzODAuMzU1IDQyOC40NTggMzc0LjQxOUM0NjMuNjQ5IDM1My45NzMgNDc1LjcwNiAzMDguNjkyIDQ1NS4zODggMjczLjI4QzQzNS4wNzEgMjM3Ljg2NyAzOTAuMDcyIDIyNS43MzUgMzU0Ljg4MSAyNDYuMThDMzQ3Ljc3MiAyNTAuMzA5IDMzOC41MjEgMjQ5Ljc5OSAzMzEuODgyIDI0NC45NDJDMzA5LjA4OSAyMjguMjY3IDI3Ny43NjUgMjI1LjYwNiAyNTEuNzg2IDI0MC42OTlDMjI2LjA2MiAyNTUuNjQ0IDIxMi42OTkgMjgzLjg1OCAyMTUuMzA2IDMxMS43ODlDMjE2LjEyNCAzMjAuNTU1IDIxMS41OTQgMzI5LjQyNiAyMDQuMDE3IDMzMy44MjlDMTY4LjgyNiAzNTQuMjc0IDE1Ni43NjggMzk5LjU1NSAxNzcuMDg2IDQzNC45NjhDMTk3LjQwMyA0NzAuMzggMjQyLjQwMiA0ODIuNTE0IDI3Ny41OTQgNDYyLjA2OEMyODYuNTQgNDU2Ljg3IDI5My45OTEgNDUwLjA2NyAyOTkuNzk1IDQ0Mi4yMjlDMzEyLjM2MSA0MjUuMjYyIDMyNy4yNzUgNDA4LjA1OSAzNDUuNDg1IDM5Ny40NzlaTTMyOC41NjUgMTI2LjI3M0MzNDMuNjYzIDE1Mi41OSAzNDIuNjg4IDE4MS42MDEgMzI2LjM4NyAxOTEuMDcxQzMxMC4wODQgMjAwLjU0MyAyODQuNjMgMTg2Ljg4NyAyNjkuNTMgMTYwLjU3MUMyNjQuNDc0IDE1MS43NTggMjYyLjg2IDEzOS44MTYgMjYxLjA0NiAxMjYuNEMyNTcuNDQ2IDk5Ljc1NzMgMjUzLjA1OCA2Ny4zMDc1IDIxOS4zNjIgNDIuMDMyOEMyNDUuMzM3IDI2Ljk0MjIgMzEzLjQ2NiA5OS45NTc2IDMyOC41NjUgMTI2LjI3M1pNMTc1LjA1NCAyNzguOTkzQzE1OC40OTMgMjg4LjYxNCAxMzIuODI5IDI3NS4wODEgMTE3LjcyOSAyNDguNzY0QzEwMi42MzEgMjIyLjQ0OSA3NC4xNzAyIDEyNi4zODYgMTAwLjU1NyAxMTEuMDU2QzEwNS4yMzIgMTUzLjE5MiAxMzEuMTM1IDE3My4xNDEgMTUyLjQwMyAxODkuNTIxQzE2My4xMTEgMTk3Ljc2NyAxNzIuNjQ0IDIwNS4xMDkgMTc3LjcwMSAyMTMuOTIyQzE5Mi43OTkgMjQwLjIzOSAxOTEuNjE0IDI2OS4zNzIgMTc1LjA1NCAyNzguOTkzWk00MTYuNjY0IDEzOS4wNDVDNDI0LjkzMyAxNjIuMDU2IDQxOC44OTMgMTg2LjM3OSA0MDMuMTc0IDE5My4zN0MzODcuNDU2IDIwMC4zNjIgMzY4LjAxIDE4Ny4zNzUgMzU5Ljc0MiAxNjQuMzY0QzM1Ni45NzMgMTU2LjY1NyAzNTcuNzI2IDE0Ni41MjYgMzU4LjU3MSAxMzUuMTQ1QzM2MC4yNDkgMTEyLjU0MSAzNjIuMjkzIDg1LjAwOTQgMzM3Ljg0MyA2MS43Njk4QzM2Mi44ODggNTAuNjI5NiA0MDguMzk1IDExNi4wMzMgNDE2LjY2NCAxMzkuMDQ1Wk0xMzUuNjMzIDM0OC44MDNDMTIxLjc0NiAzNTkuMDEzIDk3Ljc4MzYgMzUyLjEyMiA4Mi4xMTQgMzMzLjQxMUM2Ni40NDQ1IDMxNC42OTkgMzIuOTI1MSAyNDIuMzI5IDU1LjA1MzkgMjI2LjA1OUM2Mi44MTg2IDI1OC45OTQgODcuNTQyNCAyNzAuOTc0IDEwNy44NDEgMjgwLjgwOEMxMTguMDYyIDI4NS43NiAxMjcuMTYgMjkwLjE2NyAxMzIuNDA4IDI5Ni40MzRDMTQ4LjA3NyAzMTUuMTQ1IDE0OS41MjIgMzM4LjU5MSAxMzUuNjMzIDM0OC44MDNaIiBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMTA4MV8yKSIvPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzEwODFfMiIgeDE9IjE0Mi4wODkiIHkxPSI0OS4yMDk1IiB4Mj0iMzU1LjYxNiIgeTI9IjQxNi43MzgiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agb2Zmc2V0PSIwLjQyNzA4MyIgc3RvcC1jb2xvcj0iI0U4MDA2RiIvPgo8c3RvcCBvZmZzZXQ9IjAuNzM5NTgzIiBzdG9wLWNvbG9yPSIjQUM1OUZGIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg=="}function j(e){if(typeof window>"u")return;let n={info:A(),provider:e},t=new CustomEvent("eip6963:announceProvider",{detail:Object.freeze(n)});window.dispatchEvent(t)}function w(e){if(typeof window>"u")return;window.addEventListener("eip6963:requestProvider",()=>{j(e)})}(function(){if(typeof window>"u"||!window){console.warn("No window object available for Bearby injection");return}if(window.__bearbyInjected)return;try{let e=new y;if(!("ethereum"in window)||!window.ethereum)try{Object.defineProperty(window,"ethereum",{value:e,writable:!1,configurable:!0})}catch(r){window.ethereum=e,console.warn("Using fallback assignment for ethereum due to:",r)}j(e),w(e),window.__bearby_response_handlers=window.__bearby_response_handlers||{},window.__bearbyInjected=!0,window.dispatchEvent(new Event("ethereum#initialized"))}catch(e){console.error("Failed to inject Ethereum provider:",e)}})();})();
