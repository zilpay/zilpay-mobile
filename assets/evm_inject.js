(()=>{var{defineProperty:o,getOwnPropertyNames:w,getOwnPropertyDescriptor:y}=Object,c=Object.prototype.hasOwnProperty;var d=new WeakMap,g=(e)=>{var i=d.get(e),n;if(i)return i;if(i=o({},"__esModule",{value:!0}),e&&typeof e==="object"||typeof e==="function")w(e).map((r)=>!c.call(i,r)&&o(i,r,{get:()=>e[r],enumerable:!(n=y(e,r))||n.enumerable}));return d.set(e,i),i};var u=(e,i)=>{for(var n in i)o(e,n,{get:i[n],enumerable:!0,configurable:!0,set:(r)=>i[n]=()=>r})};var P={};u(P,{ZilPayProviderImpl:()=>s});class s{isZilPay=!0;#e=new Map;constructor(){this.#i(),this.#n()}#i(){this.#e.set("connect",new Set),this.#e.set("disconnect",new Set),this.#e.set("chainChanged",new Set),this.#e.set("accountsChanged",new Set),this.#e.set("message",new Set)}#n(){if(typeof window!=="undefined"&&window)window.handleZilPayEvent=(e)=>{let i=this.#e.get(e.event);if(i)i.forEach((n)=>n(e.data))}}async request(e){return new Promise((i,n)=>{let r=Math.random().toString(36).substring(2),l={type:"ZILPAY_REQUEST",uuid:r,payload:e};if(typeof window!=="undefined"&&window&&window.FlutterWebView)try{window.FlutterWebView.postMessage(JSON.stringify(l))}catch(t){n(new Error(`Failed to send request: ${t}`));return}else{n(new Error("FlutterWebView channel is not available"));return}let a=(t)=>{if(t.type==="ZILPAY_RESPONSE"&&t.uuid===r){if(t.error)n(new Error(t.error));else i(t.result);if(typeof window!=="undefined"&&window)window.removeEventListener("message",a)}};if(typeof window!=="undefined"&&window)window.addEventListener("message",a)})}async enable(){return this.request({method:"requestAccounts"})}on(e,i){let n=this.#e.get(e);if(n)n.add(i)}removeListener(e,i){let n=this.#e.get(e);if(n)n.delete(i)}}(function(){if(typeof window==="undefined"||!window){console.warn("No window object available for ZilPay injection");return}try{if("zilPay"in window&&window.zilPay){console.warn("ZilPay provider already exists in window");return}let e=new s;try{Object.defineProperty(window,"zilPay",{value:e,writable:!1,configurable:!0})}catch(i){window.zilPay=e,console.warn("Using fallback assignment for zilPay due to:",i)}window.dispatchEvent(new Event("zilPay#initialized")),console.log("ZilPay provider injected successfully")}catch(e){console.error("Failed to inject ZilPay provider:",e)}})();})();
